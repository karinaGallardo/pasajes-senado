{{ define "usuarios/table_senadores" }}
<table class="min-w-full divide-y divide-gray-200">
  <thead class="bg-gray-50">
    <tr>
      <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-10">#</th>
      <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Senador Titular / CI</th>
      <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nombre Completo</th>
      <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Departamento</th>
      <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Senador Suplente</th>
      <th scope="col" class="relative px-6 py-3"><span class="sr-only">Acciones</span></th>
    </tr>
  </thead>
  <tbody class="divide-y divide-gray-200 bg-white">
    {{ range $index, $user := .Usuarios }}
    <tr>
      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-medium">{{ inc $index }}</td>
      <td class="px-6 py-4 whitespace-nowrap">
        <div class="flex items-center">
          <div class="flex-shrink-0 h-10 w-10">
            <span class="inline-flex items-center justify-center h-10 w-10 rounded-full bg-senado-primary">
              <span class="text-sm font-medium leading-none text-white">{{ printf "%.1s" $user.Username }}</span>
            </span>
          </div>
          <div class="ml-4">
            <div class="text-sm font-medium text-gray-900">{{ $user.Username }}</div>
            <div class="text-sm text-gray-500">{{ $user.CI }}</div>
          </div>
        </div>
      </td>
      <td class="px-6 py-4 whitespace-nowrap">
        <div class="text-sm text-gray-900">{{ $user.GetNombreCompleto }}</div>
        <div class="text-sm text-gray-500">{{ if $user.Email }}{{ $user.Email }}{{ else }}-{{ end }}</div>
      </td>
      <td class="px-6 py-4 whitespace-nowrap">
        {{ if $user.Departamento }}
        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-indigo-100 text-indigo-800">{{ $user.Departamento.Nombre }}</span>
        {{ else }}
        <span class="text-gray-400 italic text-xs">No asignado</span>
        {{ end }}
      </td>
      <td class="px-6 py-4 whitespace-nowrap">
        {{ $suplente := $user.GetSuplente }} {{ if $suplente }}
        <div class="text-sm text-gray-900 font-bold">{{ $suplente.GetNombreCompleto }}</div>
        <div class="text-[11px] text-gray-500 font-medium">CI: {{ $suplente.CI }}</div>

        {{ if $suplente.Departamento }}
        <div class="text-[11px] text-indigo-600 font-bold uppercase tracking-tighter">{{ $suplente.Departamento.Nombre }}</div>
        {{ end }}

        <div class="mt-1 space-y-0.5">
          {{ if $suplente.Email }}
          <div class="text-[10px] text-gray-400 flex items-center">
            <svg class="w-2.5 h-2.5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
            </svg>
            {{ $suplente.Email }}
          </div>
          {{ end }} {{ if $suplente.Phone }}
          <div class="text-[10px] text-gray-400 flex items-center">
            <svg class="w-2.5 h-2.5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
              ></path>
            </svg>
            {{ $suplente.Phone }}
          </div>
          {{ end }}
        </div>

        <div class="flex space-x-2 mt-2">
          <a
            href="/solicitudes/nueva?user_id={{ $suplente.ID }}"
            class="text-[10px] text-indigo-600 hover:text-indigo-900 font-bold bg-indigo-50 px-1.5 py-0.5 rounded border border-indigo-100 transition-colors"
          >
            Solicitar
          </a>
          <button
            class="text-[10px] text-senado-primary hover:text-senado-900 font-bold bg-gray-50 px-1.5 py-0.5 rounded border border-gray-100 transition-colors"
            hx-get="/usuarios/{{ $suplente.ID }}/editar"
            hx-target="#modal-container"
            @click="modalOpen = true"
          >
            Editar Suplente
          </button>
        </div>
        {{ else }}
        <span class="text-gray-400 italic text-xs">Sin suplente asignado</span>
        {{ end }}
      </td>
      <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">{{ template "usuarios/actions" $user }}</td>
    </tr>
    {{ end }}
  </tbody>
</table>
{{ end }}
