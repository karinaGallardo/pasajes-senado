{{ define "usuarios/components/table_senadores" }}
<table class="min-w-full divide-y divide-gray-200">
  <thead class="bg-neutral-50">
    <tr>
      <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider w-10">#</th>
      <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Senador Titular</th>
      <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Senador Suplente</th>
    </tr>
  </thead>
  <tbody class="divide-y divide-gray-200 bg-white">
    {{ range $index, $user := .Usuarios }}
    <tr>
      <td class="px-6 py-4 whitespace-nowrap text-sm text-neutral-500 font-medium">{{ inc $index }}</td>
      <td class="px-6 py-4 whitespace-nowrap border-r border-neutral-100">
        <div class="flex items-center gap-2">
          <div class="text-sm text-neutral-900 font-bold">{{ $user.GetNombreCompleto }}</div>
          {{ if $user.IsBlocked }}
          <span class="inline-flex items-center px-1.5 py-0.5 rounded text-[9px] font-bold bg-red-100 text-red-800">BLOQUEADO</span>
          {{ end }}
        </div>
        <div class="text-[11px] text-neutral-500 font-medium">CI: {{ $user.CI }}</div>

        <div class="mt-1 space-y-0.5">
          {{ if $user.Cargo }}
          <div class="text-[10px] text-neutral-500 font-bold uppercase">
            {{ $user.Cargo.Descripcion }} {{ if $user.Departamento }} por {{ $user.Departamento.Nombre }} {{ end }}
          </div>
          {{ end }} {{ if $user.Oficina }}
          <div class="text-[10px] text-neutral-400">{{ $user.Oficina.Detalle }}</div>
          {{ end }} {{ if $user.Email }}
          <div class="text-[10px] text-neutral-400 flex items-center">
            <i class="ph ph-envelope text-xs mr-1"></i>
            {{ $user.Email }}
          </div>
          {{ end }} {{ if $user.Phone }}
          <div class="text-[10px] text-neutral-400 flex items-center">
            <i class="ph ph-phone text-xs mr-1"></i>
            {{ $user.Phone }}
          </div>
          {{ end }}
        </div>

        <div class="flex flex-wrap gap-2 mt-2">
          {{ if $.AuthUser.CanCreateSolicitudFor $user }}
          <button
            type="button"
            class="text-[10px] text-white font-bold bg-primary hover:bg-primary-600 px-1.5 py-0.5 rounded shadow-sm transition-colors cursor-pointer flex items-center gap-1"
            hx-get="/solicitudes/oficial/modal-crear?target_user_id={{ $user.ID }}"
            hx-target="#modal-container">
            <i class="ph ph-airplane-tilt text-xs"></i>
            Solicitud Oficial
          </button>
          {{ end }}
          <a
            href="/cupos/derecho/{{ $user.ID }}/{{ $.CurrentYear }}"
            class="text-[10px] text-primary-600 hover:text-primary-900 font-bold bg-primary-50 px-1.5 py-0.5 rounded border border-primary-100 transition-colors">
            Ver Cupos
          </a>
          <button
            type="button"
            class="text-[10px] text-primary hover:text-primary-900 font-bold bg-neutral-50 px-1.5 py-0.5 rounded border border-neutral-100 transition-colors cursor-pointer"
            hx-get="/usuarios/{{ $user.ID }}/editar"
            hx-target="#modal-container">
            Editar Titular
          </button>
          {{ if $user.IsBlocked }}
          <button
            type="button"
            class="text-[10px] text-red-600 hover:text-red-900 font-bold bg-red-50 px-1.5 py-0.5 rounded border border-red-100 transition-colors cursor-pointer"
            hx-post="/usuarios/{{ $user.ID }}/unblock"
            hx-confirm="¿Desbloquear titular?">
            Desbloquear
          </button>
          {{ end }}
        </div>
      </td>
      <td class="px-6 py-4 whitespace-nowrap">
        {{ $suplente := $user.GetSuplente }} {{ if $suplente }}
        <div class="flex items-center gap-2">
          <div class="text-sm text-neutral-900 font-bold">{{ $suplente.GetNombreCompleto }}</div>
          {{ if $suplente.IsBlocked }}
          <span class="inline-flex items-center px-1.5 py-0.5 rounded text-[9px] font-bold bg-red-100 text-red-800">BLOQUEADO</span>
          {{ end }}
        </div>
        <div class="text-[11px] text-neutral-500 font-medium">CI: {{ $suplente.CI }}</div>

        <div class="mt-1 space-y-0.5">
          {{ if $suplente.Cargo }}
          <div class="text-[10px] text-neutral-500 font-bold uppercase">
            {{ $suplente.Cargo.Descripcion }} {{ if $suplente.Departamento }} por {{ $suplente.Departamento.Nombre }} {{ end }}
          </div>
          {{ end }} {{ if $suplente.Oficina }}
          <div class="text-[10px] text-neutral-400">{{ $suplente.Oficina.Detalle }}</div>
          {{ end }} {{ if $suplente.Email }}
          <div class="text-[10px] text-neutral-400 flex items-center">
            <i class="ph ph-envelope text-xs mr-1"></i>
            {{ $suplente.Email }}
          </div>
          {{ end }} {{ if $suplente.Phone }}
          <div class="text-[10px] text-neutral-400 flex items-center">
            <i class="ph ph-phone text-xs mr-1"></i>
            {{ $suplente.Phone }}
          </div>
          {{ end }}
        </div>

        <div class="flex flex-wrap gap-2 mt-2">
          {{ if $.AuthUser.CanCreateSolicitudFor $suplente }}
          <button
            type="button"
            class="text-[10px] text-white font-bold bg-primary hover:bg-primary-600 px-1.5 py-0.5 rounded shadow-sm transition-colors cursor-pointer flex items-center gap-1"
            hx-get="/solicitudes/oficial/modal-crear?target_user_id={{ $suplente.ID }}"
            hx-target="#modal-container">
            <i class="ph ph-airplane-tilt text-xs"></i>
            Solicitud Oficial
          </button>
          {{ end }}
          <a
            href="/cupos/derecho/{{ $suplente.ID }}/{{ $.CurrentYear }}"
            class="text-[10px] text-primary-600 hover:text-primary-900 font-bold bg-primary-50 px-1.5 py-0.5 rounded border border-primary-100 transition-colors">
            Ver Cupos
          </a>
          <button
            type="button"
            class="text-[10px] text-primary hover:text-primary-900 font-bold bg-neutral-50 px-1.5 py-0.5 rounded border border-neutral-100 transition-colors cursor-pointer"
            hx-get="/usuarios/{{ $suplente.ID }}/editar"
            hx-target="#modal-container">
            Editar Suplente
          </button>
          {{ if $suplente.IsBlocked }}
          <button
            type="button"
            class="text-[10px] text-red-600 hover:text-red-900 font-bold bg-red-50 px-1.5 py-0.5 rounded border border-red-100 transition-colors cursor-pointer"
            hx-post="/usuarios/{{ $suplente.ID }}/unblock"
            hx-confirm="¿Desbloquear suplente?">
            Desbloquear
          </button>
          {{ end }}
        </div>
        {{ else }}
        <span class="text-neutral-400 italic text-xs">Sin suplente asignado</span>
        {{ end }}
      </td>
    </tr>
    {{ end }}
  </tbody>
</table>
{{ end }}
